<mat-card *ngFor="let r of data">
  <mat-card-header>
    <img mat-card-avatar src="/bb/bb20/img/icon/{{r.hkey}}.jpg" />
    <mat-card-title>{{r.name}}</mat-card-title>
    <mat-card-subtitle><small>{{r.fullname}}</small></mat-card-subtitle>
  </mat-card-header>
  <img mat-card-image src="/bb/bb20/img/med/{{r.hkey}}.jpg" />
  <mat-card-actions align="end">
    <button mat-icon-button (click)="delete(r)" color="accent">
      <mat-icon>delete</mat-icon>
    </button>
    <button mat-icon-button (click)="add(r)">
      <mat-icon>file_copy</mat-icon>
    </button>
    <button mat-icon-button (click)="edit(r)" color="primary">
      <mat-icon>edit</mat-icon>
    </button>
  </mat-card-actions>
</mat-card>


<ng-template #editTemplate let-data>
  <form [formGroup]="data" (ngSubmit)="save(data)">
    <h1 mat-dialog-title>{{data.value.new ? 'Add' : 'Edit'}} Houseguest</h1>

    <mat-dialog-content>
      <input-field label="Short Name" [control]="data.get('name')" hint="(preferably one word)"></input-field>
      <input-field label="Full Name" [control]="data.get('fullname')"></input-field>
    </mat-dialog-content>

    <mat-dialog-actions class="split">
      <div>
        <button mat-button type="button" mat-dialog-close color="accent" *ngIf="!data.value.new" (click)="delete(data.value)">Delete</button>
      </div>
      <div>
        <button mat-button type="button" mat-dialog-close>Cancel</button>
        <button mat-button type="submit" color="primary" [disabled]="data.invalid">Save</button>
      </div>
    </mat-dialog-actions>
  </form>
</ng-template>